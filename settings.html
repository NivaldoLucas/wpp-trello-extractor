<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Configurações</title>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
</head>
<body>
  <h3>Configurar Z-API</h3>
  <input id="instance" placeholder="ID da instância" /><br /><br />
  <input id="token" placeholder="Token da API" /><br /><br />
  <input id="clientToken" placeholder="Token do Cliente (Client-Token)" /><br /><br />

  <button onclick="saveSettings()">Salvar</button>

  <script>
    const t = TrelloPowerUp.iframe();
  
    window.saveSettings = () => {
      const instance = document.getElementById('instance').value;
      const token = document.getElementById('token').value;
      const clientToken = document.getElementById('clientToken').value;
  
      if (!instance || !token || !clientToken) {
        alert("Preencha todos os campos.");
        return;
      }
  
      t.set('board', 'shared', {
        zapi_instance: instance,
        zapi_token: token,
        client_token: clientToken
      }).then(() => t.closePopup());
    };
  </script>
</body>
</html>
